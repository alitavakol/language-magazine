<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Material Design fonts -->
		<link rel="stylesheet" type="text/css" href="file:///android_asset/ubuntu.css">
		<link rel="stylesheet" type="text/css" href="../../../../src/main/assets/ubuntu.css">

		<!-- Bootstrap -->
		<link rel="stylesheet" type="text/css" href="file:///android_asset/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="../../../../src/main/assets/bootstrap.min.css">

		<!-- Bootstrap Material Design -->
		<!-- <link rel="stylesheet" type="text/css" href="bootstrap-material-design.min.css"> -->

		<link rel="stylesheet" type="text/css" href="../styles.css">

		<style id="dynamic-rules">
		</style>

		<style type="text/css">
			body {
				overflow-y: scroll;
			}
			h1, h3 {
				margin-top: 0;
			}
			tr > td:first-child {
				font-weight: bold;
				text-align: right;
			}
			tr > td:last-child {
				padding-left: 16px;
			}
			td {
				vertical-align: top;
			}
			ol, ul {
				padding-left: 1.2em;
			}
			h4 {
				text-transform: uppercase;
				font-weight: 300;
				margin-top: 24px;
				margin-bottom: 16px;
			}
			.frame {
				padding: 4px;
				background-color: white;
				-webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.12), 0 1px 1px 0 rgba(0, 0, 0, 0.24);
				box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.12), 0 1px 1px 0 rgba(0, 0, 0, 0.24);
			}
		</style>

		<style id="local-rules">
		</style>

		<script src="file:///android_asset/jquery-1.11.3.min.js"></script>
		<script src="../../../../src/main/assets/jquery-1.11.3.min.js"></script>
		<script src="file:///android_asset/tinycolor-min.js"></script>
		<script src="../../../../src/main/assets/tinycolor-min.js"></script>

		<script src="../code.js"></script>
		<script src="../debug.js"></script>
	</head>

	<body>
		<div class="foundation">
			<div id="top-margin"></div>

			<h3 class="alt">US Bar Chats</h3>
			<h1 class="alt">Bugs!</h1>
			<h4>This month, Tammy and Evan are talking about bugs (insects).</h4>

			<div class="transcript">
				<table>
					<tr>
						<td>Evan:</td>
						<td><span data-start="14123" data-end="21839">So the other day I was in my apartment and I went into the bathroom and there was a giant cockroach in the toilet.</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td>Ewww!</td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="21840" data-end="26348">Yeah, <a class="new-word" data-word="no kidding" data-type="exp" data-en="I am not joking; I am being serious">no kidding</a>. It started making these crazy noises and then it flew away.</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="26349" data-end="27489">Oh, that’s horrible.</span></td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="27490" data-end="34134">Yes, I was&#8230; I was <a class="new-word" data-word="devastated" data-type="adj" data-en="shocked; very sad; emotionally destroyed">devastated</a>. I didn’t know what to do. Do you have any strange or crazy fears of bugs?</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="34135" data-end="42540">I do actually. It’s kind of embarrassing to mention but I am afraid of water bugs or cockroaches or anything pretty much that <a class="new-word" data-word="to go crunch" data-type="exp" data-en="if something goes “crunch”, it makes a breaking noise as you tread on it">goes crunch</a> under your shoe.</span></td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="42541" data-end="43760">Eww, water bugs.</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="43761" data-end="45831">I know! They fly!</span></td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="45832" data-end="48086">What happens if you see a water bug?</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="48087" data-end="58269">One of two things, that whole flight or fr&#8230; erm&#8230; fight&#8230; <a class="new-word" data-word="a flight-or-fight reaction" data-type="n" data-en="an automatic, instinctive reaction that occurs when you are in danger. “Flight” refers to the act of running away / escaping; “fight” refers to the act of staying and fighting the danger">flight-or-fight reaction</a>. Either I sit there and scream and do absolutely nothing or I run out.</span></td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="58270" data-end="60797">What happened the last time you saw a water bug?</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="60798" data-end="67629">Well the last time I saw a water bug, my cousin kicked it at me and I left the building. I ran out of the apartment and I waited in the street.</span></td>
					</tr>
					<tr>
						<td>Evan:</td>
						<td><span data-start="67630" data-end="70150">And you’re scarred emotionally forever.</span></td>
					</tr>
					<tr>
						<td>Tammy:</td>
						<td><span data-start="70151" data-end="72850">Yes, I am!</span> <span class="accent">✪</span></td>
					</tr>
				</table>
			</div>

			<img src="1.png" class="frame" style="-webkit-transform: rotate(-5deg); transform: rotate(-5deg); margin-left: 15%; margin-top: 16px;">
			<img src="2.png" class="frame" style="-webkit-transform: rotate(10deg); transform: rotate(10deg); display: block; margin-left: 25%; margin-top: -16px;">
			<img id="bugs" src="bugs.png" style="margin-top: -36px;">

			<div id="bottom-margin"></div>
		</div>

		<script type="text/javascript">
			restoringInstanceState = false;

			adjustCustomLayout = function(options) {
				$('#local-rules').text("\
					body { background: -webkit-linear-gradient(#" + accentColor + ",#" + backgroundColor + "); background-repeat: no-repeat; -webkit-background-attachment: fixed; } \
					.foundation { margin-left: " + horizontalMargin + "px; padding-left: " + horizontalMargin + "px; padding-right: " + horizontalMargin + "px; background-color: #" + backgroundColor + "; } \
					h1 { color: #" + accentColor + "; } \
					.row { margin-left: -" + spacing + "px; margin-right: -" + spacing + "px; } \
					.acnt, tr:nth-child(odd) { color: " + tinycolor(accentColor).darken().darken() + "; } \
					#top-margin { height: " + (topMargin+verticalMargin) + "px; } \
					#bottom-margin { height: " + (bottomMargin-16) + "px; } \
					#bugs { margin-left: -" + horizontalMargin + "px; display: block; } \
				");
			}

			prevScroll = 0;

			saveInstanceState = function() {
				if(restoringInstanceState)
					return;

				outState = {
					scroll: prevScroll,
				};

				if(typeof(app) != 'undefined')
					app.saveInstanceState(JSON.stringify(outState));
			}

			restoreInstanceState = function(savedInstanceState) {
				restoringInstanceState = true;
				state = JSON.parse(savedInstanceState);

				$('body').scrollTop((state['scroll'] || 0) * $('body').height());
				prevScroll = $('body').scrollTop() / $('body').height();

				restoringInstanceState = false;
			}

			setInterval(function() {
				scroll = $('body').scrollTop() / $('body').height();
				if(scroll != prevScroll) {
					prevScroll = scroll;
					saveInstanceState();
				}
			}, 3000);

			lastScrollTop = 0;
			if(typeof(app) != 'undefined') {
				$(document).scroll(function() {
					scrollTop = $(document).scrollTop();

					if(scrollTop < topMargin) {
						if(scrollTop < lastScrollTop && lastScrollTop >= topMargin)
							app.setToolbarScrollable(false);

					} else if(lastScrollTop < topMargin)
							app.setToolbarScrollable(true);

					lastScrollTop = scrollTop;
				});
			}
		</script>

	</body>
</html>
